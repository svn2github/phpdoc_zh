<?xml version="1.0" encoding="gb2312"?>
<!-- $Revision: 1.6 $ -->
<!-- $Author: dallas $ -->
<!-- EN-Revision: 1.30 Maintainer: verdana Status: ready -->
<!-- CREDITS: dallas -->
  <chapter id="language.expressions">
   <title>表达式</title>

   <simpara>
    表达式是 PHP 最重要的基石。在 PHP
    中，几乎你所写的任何东西都是一个表达式。简单但却最精确的定义一个表达式的方式就是“anything that has a value”。
   </simpara>

   <simpara>
    最基本的表达式形式是常量和变量。当你键入“$a = 5”，即将值 '5' 分配给变量
    $a。'5'，很明显，值为 5，换句话说 '5' 是一个值为5的表达式（既然如此，'5' 是一个整型常量）。
   </simpara>


   <simpara>
    赋值之后，你所盼望的情况是 $a 的值为5，因而如果你写下
    $b = $a，期望的是它犹如 $b = 5 一样。换句话说，$a 是一个值也为 5
    的表达式。如果一切运行正确，那这正是将要发生的正确结果。
   </simpara>

   <para>
    稍微复杂的表达式例子就是函数。例如，考虑下面的函数：

    <informalexample>
     <programlisting role="php">
<![CDATA[
<?php
function foo ()
{
    return 5;
}
?>
]]>
     </programlisting>
    </informalexample>
   </para>

   <simpara>
    假定你已经熟悉了函数的概念（如果不是的话，请看一下<link
    linkend="language.functions">函数</link>的相关章节），那么键入
    <literal>$c = foo()</literal> 从本质上来说就如写下
    <literal>$c = 5</literal>，而且你是正确的。 函数也是表达式，表达式的值即为它们的返回值。既然
    foo() 返回 5，表达式“foo()”的值也是 5。通常函数不会仅仅返回一个静态值，而可能会计算一些东西。
   </simpara>

   <simpara>
    当然，PHP 中的值常常并非是整型的。PHP
    支持四种标量值（标量值不能拆分为更小的单元，和例如数组不同）类型：整型值（<type>integer</type>），浮点数值（<type>float</type>），字符串值（<type>string</type>）和布尔值（<type>boolean</type>）。PHP
    也支持两种复合类型：数组和对象。这两种类型具可以赋值给变量或者从函数返回。
   </simpara>

   <simpara>
    PHP 和其它语言一样在表达式的道路上发展，但推进得更深远。PHP
    是一种面向表达式的语言，从这一方面来讲几乎一切都是表达式。考虑刚才我们已经研究过的例子，“$a =
    5”。可以轻松的看到这里有两个相关的值，整型常量 5，而且变量 $a
    的值也被更新为 5。但是事实是：这里只有一个相关的附加值，即被分配的值本身。赋值操作计算需分配的值，即
    5。实际上，意味着“$a = 5”，不必管它是做什么的，是一个值为 5
    的表达式。因而，一些像这样的代码“$b = ($a = 5)”和“$a =5;
    $b=5”（分号标志着语句的结束）。因为赋值操作的顺序是由右到左的，你也可以这么写“$b = $a =5”。
   </simpara>

   <simpara>
    另外一个很好的面向表达式的例子就是前、后递增和递减。PHP
    和多数其它语言的用户应该比较熟悉变量 ++ 和变量 -- 符号。即<link
    linkend="language.operators.increment">递增和递减运算符</link>。在
    PHP/FI 2 中，语句“$a++”没有值（不是表达式），这样的话你便不能为其赋值或者以任何其它方式来使用它。PHP
    通过将其变为了表达式，类似 C 语言，增强了递增/递减的能力。在
    PHP 和 C 语言 中，有两种类型的递增前递增和后递增，本质上来讲，前递增和后递增均增加了变量的值，并且对于变量的影响是相同的。不同的是递增表达式的值。前递增，写做“++$variable”，求增加后的值（PHP
    在读取变量的值之前，增加变量的值，因而称之为“前递增”）。后递增，写做‘$variable++’，求变量未递增之前的原始值（PHP
    在读取变量的值之后，增加变量的值，因而叫做‘后递增’）。【译者注：前递增，++$a，则该表达式的值加
    1；后递增，$a++，则该表达式的值不变。】
   </simpara>

   <simpara>
    一个常用到表达式类型是<link
    linkend= "language.operators.comparison">比较表达式</link>。这些表达式求值
    &false; 或 &true;。PHP
    支持 &gt;（大于），&gt;=（大于等于），==（等于），!=（不等于），&lt;（小于），&lt;= (小于等于)。PHP
    还支持全等运算符 ===（值和类型均相同）和非全等运算符
    !==（值或者类型不同）。这些表达式都是在条件判断语句，比如，<literal>if</literal>
    语句中最常用的。
   </simpara>

   <simpara>
    这里，我们将要研究的最后一个例子是组合的赋值操作符表达式。你已经知道如果想要为变量
    $a 加1，可以简单的写‘$a++’或者‘++$a’。但是如果你想为变量增加大于
    1 的值，比如 3，该怎么做？你可以多次写‘$a++’，但这样明显不是一种高效舒适的方法，一个更加通用的做法是‘$a
    = $a + 3’。‘$a + 3’ 计算 $a 加上 3 的值，并且得到的值重新赋予变量
    $a，于是 $a 的值增加了3。在 PHP 及其它几种类似 C
    的语言中，你可以以一种更加简短的形式完成上述功能，因而也更加清楚快捷。为
    $a 的当前值加 3，可以这样写：$a += 3。这里的意思是“取变量 $a 的值，加
    3，得到的结果再次分配给变量 $a”。除了更简略和清楚外，也可以更快的运行。‘$a +=
    3’的值，如同一个正常赋值操作的值，是赋值后的值。注意它不是 3，而是
    $a 加上3的组合值（即已经分配给 $a 的值）【译者注：这里表达式‘$a += 3’的值是什么呢？不是
    3，也不是 $a 的原始值，而是完成 +3 操作后变量 $a
    的值】。 任何两位操作符都可以使用在复制操作符模式，例如‘$a -= 5’（从变量
    $a 的值中减去 5），‘$b *= 7’ （变量 $b 乘以 7），等等。
   </simpara>

   <para>
    有一些表达式，如果你没有在别的语言中看到过的话，可能认为它们是多余的，如三重操作符：
    <informalexample>
     <programlisting role="php">
<![CDATA[
$first ? $second : $third
]]>
     </programlisting>
    </informalexample>
    如果第一个子表达式的值是 &true;（非零），那么计算第二个子表达式的值，其值即为整个表达式的值。否则，将是第三个子表达式的值。
   </para>

   <para>
    下面的例子一般来说应该可以稍微帮你理解前、后递增和表达式：
    <informalexample>
     <programlisting role="php">
<![CDATA[
<?php
function double($i)
{
    return $i*2;
}
$b = $a = 5;        /* assign the value five into the variable $a and $b */
$c = $a++;          /* post-increment, assign original value of $a
                       (5) to $c */
$e = $d = ++$b;     /* pre-increment, assign the incremented value of
                       $b (6) to $d and $e */

/* at this point, both $d and $e are equal to 6 */

$f = double($d++);  /* assign twice the value of $d before
                       the increment, 2*6 = 12 to $f */
$g = double(++$e);  /* assign twice the value of $e after
                       the increment, 2*7 = 14 to $g */
$h = $g += 10;      /* first, $g is incremented by 10 and ends with the
                       value of 24. the value of the assignment (24) is
                       then assigned into $h, and $h ends with the value
                       of 24 as well. */
?>
]]>
     </programlisting>
    </informalexample>
   </para>

   <simpara>
    一些表达式可以被当成语句。这时，一条语句的形式是
    'expr' ';'，即一个表达式加一个分号结尾。在“$b=$a=5;”中，$a=5
    是一个有效的表达式，但它单独不是一条语句。“$b=$a=5;”是一条有效的语句。
   </simpara>

   <simpara>
    最后一件值得提起的事情就是表达式的真值。在许多事件中，大体上主要是在条件执行和循环中，不要专注于表达式中明确的值，反而要注意表达式的值是否是
    &true; 或者 &false;。常量 &true; 和 &false;（大小写无关）是两种可能的
    Boolean 值。如果有必要，一个表达式将自动转换为 Boolean。参见<link
    linkend="language.types.typecasting">类型强制转换</link>一节。
   </simpara>
   <simpara>
    PHP 提供了一套完整强大的表达式，而为它提供完整的文件资料已经超出了本手册的范围。上面的例子应该为你提供了一个好的关于什么是表达式和怎样构建一个有用的表达式的概念。在本手册的其余部分，我们将始终使用
    <varname>expr</varname> 来表示一个有效的 PHP 表达式。
   </simpara>

  </chapter>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
