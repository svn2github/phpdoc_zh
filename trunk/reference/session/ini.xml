<?xml version="1.0" encoding="gb2312"?>
<!-- $Revision: 1.2 $ -->
<!-- $Author: dallas $ -->
<!-- EN-Revision: 1.39 Maintainer: dallas Status: partial -->
<section id="session.configuration">
 &reftitle.runtime;
 &extension.runtime;
 <para>
 <table>
  <title>会话配置选项</title>
  <tgroup cols="4">
   <thead>
    <row>
     <entry>名称</entry>
     <entry>默认值</entry>
     <entry>可修改范围</entry>
     <entry>更新纪录</entry>
    </row>
   </thead>
   <tbody>
    <row>
     <entry>session.save_path</entry>
     <entry>""</entry>
     <entry>PHP_INI_ALL</entry>
     <entry></entry>
    </row>
    <row>
     <entry>session.name</entry>
     <entry>"PHPSESSID"</entry>
     <entry>PHP_INI_ALL</entry>
     <entry></entry>
    </row>
    <row>
     <entry>session.save_handler</entry>
     <entry>"files"</entry>
     <entry>PHP_INI_ALL</entry>
     <entry></entry>
    </row>
    <row>
     <entry>session.auto_start</entry>
     <entry>"0"</entry>
     <entry>PHP_INI_ALL</entry>
     <entry></entry>
    </row>
    <row>
     <entry>session.gc_probability</entry>
     <entry>"1"</entry>
     <entry>PHP_INI_ALL</entry>
     <entry></entry>
    </row>
    <row>
     <entry>session.gc_divisor</entry>
     <entry>"100"</entry>
     <entry>PHP_INI_ALL</entry>
     <entry>自 PHP 4.3.2 起可用。</entry>
    </row>
    <row>
     <entry>session.gc_maxlifetime</entry>
     <entry>"1440"</entry>
     <entry>PHP_INI_ALL</entry>
     <entry></entry>
    </row>
    <row>
     <entry>session.serialize_handler</entry>
     <entry>"php"</entry>
     <entry>PHP_INI_ALL</entry>
     <entry></entry>
    </row>
    <row>
     <entry>session.cookie_lifetime</entry>
     <entry>"0"</entry>
     <entry>PHP_INI_ALL</entry>
     <entry></entry>
    </row>
    <row>
     <entry>session.cookie_path</entry>
     <entry>"/"</entry>
     <entry>PHP_INI_ALL</entry>
     <entry></entry>
    </row>
    <row>
     <entry>session.cookie_domain</entry>
     <entry>""</entry>
     <entry>PHP_INI_ALL</entry>
     <entry></entry>
    </row>
    <row>
     <entry>session.cookie_secure</entry>
     <entry>""</entry>
     <entry>PHP_INI_ALL</entry>
     <entry>自 PHP 4.0.4 起可用。</entry>
    </row>
    <row>
     <entry>session.use_cookies</entry>
     <entry>"1"</entry>
     <entry>PHP_INI_ALL</entry>
     <entry></entry>
    </row>
    <row>
     <entry>session.use_only_cookies</entry>
     <entry>"1"</entry>
     <entry>PHP_INI_ALL</entry>
     <entry>自 PHP 4.3.0 起可用。</entry>
    </row>
    <row>
     <entry>session.referer_check</entry>
     <entry>""</entry>
     <entry>PHP_INI_ALL</entry>
     <entry></entry>
    </row>
    <row>
     <entry>session.entropy_file</entry>
     <entry>""</entry>
     <entry>PHP_INI_ALL</entry>
     <entry></entry>
    </row>
    <row>
     <entry>session.entropy_length</entry>
     <entry>"0"</entry>
     <entry>PHP_INI_ALL</entry>
     <entry></entry>
    </row>
    <row>
     <entry>session.cache_limiter</entry>
     <entry>"nocache"</entry>
     <entry>PHP_INI_ALL</entry>
     <entry></entry>
    </row>
    <row>
     <entry>session.cache_expire</entry>
     <entry>"180"</entry>
     <entry>PHP_INI_ALL</entry>
     <entry></entry>
    </row>
    <row>
     <entry>session.use_trans_sid</entry>
     <entry>"0"</entry>
     <entry>PHP_INI_ALL</entry>
     <entry>在 PHP &lt;= 4.2.3 是 PHP_INI_ALL，在 PHP &lt; 5 是 PHP_INI_PERDIR。自 PHP 4.0.3 起可用。</entry>
    </row>
    <row>
     <entry>session.bug_compat_42</entry>
     <entry>"1"</entry>
     <entry>PHP_INI_ALL</entry>
     <entry>自 PHP 4.3.0 起可用。</entry>
    </row>
    <row>
     <entry>session.bug_compat_warn</entry>
     <entry>"1"</entry>
     <entry>PHP_INI_ALL</entry>
     <entry>自 PHP 4.3.0 起可用。</entry>
    </row>
    <row>
     <entry>session.hash_function</entry>
     <entry>"0"</entry>
     <entry>PHP_INI_ALL</entry>
     <entry>自 PHP 5.0.0 起可用。</entry>
    </row>
    <row>
     <entry>session.hash_bits_per_character</entry>
     <entry>"4"</entry>
     <entry>PHP_INI_ALL</entry>
     <entry>自 PHP 5.0.0 起可用。</entry>
    </row>
    <row>
     <entry>url_rewriter.tags</entry>
     <entry>"a=href,area=href,frame=src,form=,fieldset="</entry>
     <entry>PHP_INI_ALL</entry>
     <entry>自 PHP 4.0.4 起可用。</entry>
    </row>
    
<!-- Not yet
    <row>
     <entry>session.encode_sources</entry>
     <entry>"globals</entry>
     <entry>track"</entry>
     <entry></entry>
    </row>
-->

   </tbody>
  </tgroup>
 </table>
 &ini.php.constants;
 </para>
 <para>
  会话管理系统支持许多配置选项，可以在自己的 &php.ini; 文件中设定。这里只是个简短的概览。
 <variablelist>

  <varlistentry id="ini.session.save-handler">
   <term>
    <parameter>session.save_handler</parameter>
    <type>string</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.save_handler</literal> 定义了来存储和获取与会话关联的数据的处理器的名字。默认为
     <literal>files</literal>。参见
     <function>session_set_save_handler</function>。
    </simpara>
   </listitem>
  </varlistentry>

  <varlistentry id="ini.session.save-path">
   <term>
    <parameter>session.save_path</parameter>
    <type>string</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.save_path</literal> 定义了传递给存储处理器的参数。如果选择了默认的
     files 文件处理器，则此值是创建文件的路径。默认为
     <literal>/tmp</literal>。参见
     <function>session_save_path</function>。
    </simpara>
    <para>
     此指令还有一个可选的 N 参数来决定会话文件分布的目录深度。例如，设定为
     <literal>'5;/tmp'</literal> 将使创建的会话文件和路径类似于
     <literal>/tmp/4/b/1/e/3/sess_4b1e384ad74619bd212e236e52a5a174If</literal>。要使用
     N 参数，必须在使用前先创建好这些目录。在 <filename>ext/session</filename>
     目录下有个小的 shell 脚本名叫 <filename>mod_files.sh</filename>
     可以用来做这件事。此外注意如果使用了 N 参数并且 N 大于
     0，那么将不会执行自动垃圾回收，更多信息见 &php.ini;。另外如果用了 N
     参数，要确保将 <literal>session.save_path</literal> 的值用双引号 "quotes"
     括起来，因为分隔符分号（ <literal>;</literal>）在 &php.ini; 中也是注释符号。
    </para>
    <warning>
     <para>
      如果将此设定为一个全局可读的目录，例如
      <filename>/tmp</filename>（默认值），服务器上的其他用户有可能通过该目录的文件列表破解会话。
     </para>
    </warning>
    <note>
     <simpara>
      在 PHP 4.3.6 之前，Windows 用户必须修改此选项以使用 PHP 的会话函数。必须指定一个合法路径，例如：<filename>c:/temp</filename>。
     </simpara>
    </note>
   </listitem>
  </varlistentry>

  <varlistentry id="ini.session.name">
   <term>
    <parameter>session.name</parameter>
    <type>string</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.name</literal> 指定会话名以用做 cookie 的名字。只能由字母数字组成，默认为
     <literal>PHPSESSID</literal>。参见 <function>session_name</function>。
    </simpara>
   </listitem>
  </varlistentry>
  
  <varlistentry id="ini.session.auto-start">
   <term>
    <parameter>session.auto_start</parameter>
    <type>boolean</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.auto_start</literal> 指定会话模块是否在请求开始时自动启动一个会话。默认为
     <literal>0</literal>（不启动）。
    </simpara>
   </listitem>
  </varlistentry>

  <varlistentry id="ini.session.serialize-handler">
   <term>
    <parameter>session.serialize_handler</parameter>
    <type>string</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.serialize_handler</literal> 定义用来序列化／解序列化的处理器名字。当前支持
     PHP 内部格式（名为 <literal>php</literal>）和
     WDDX（名为 <literal>wddx</literal>）。如果 PHP 编译时加入了 <link linkend="ref.wddx">WDDX
     支持</link>，则只能用 WDDX。默认为 <literal>php</literal>。
    </simpara>
   </listitem>
  </varlistentry>

  <varlistentry id="ini.session.gc-probability">
   <term>
    <parameter>session.gc_probability</parameter>
    <type>integer</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.gc_probability</literal> 与
     <literal>session.gc_divisor</literal> 合起来用来管理 gc（garbage collection
     垃圾回收）进程启动的概率。默认为 <literal>1</literal>。详见 <link
     linkend="ini.session.gc-divisor">session.gc_divisor</link>。
    </simpara>
   </listitem>
  </varlistentry>

  <varlistentry id="ini.session.gc-divisor">
   <term>
    <parameter>session.gc_divisor</parameter>
    <type>integer</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.gc_divisor</literal> 与
     <literal>session.gc_probability</literal> 合起来定义了在每个会话初始化时启动
     gc（garbage collection 垃圾回收）进程的概率。此概率用
     gc_probability/gc_divisor 计算得来。例如 1/100
     意味着在每个请求中有 1% 的概率启动 gc 进程。<literal>session.gc_divisor</literal>
     默认为 <literal>100</literal>。
    </simpara>
   </listitem>
  </varlistentry>
  
  <varlistentry id="ini.session.gc-maxlifetime">
   <term>
    <parameter>session.gc_maxlifetime</parameter>
    <type>integer</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.gc_maxlifetime</literal> specifies the number
     of seconds after which data will be seen as 'garbage' and
     cleaned up.
    </simpara>
    <note>
     <para>
      If different scripts have different values of
      <literal>session.gc_maxlifetime</literal> but share the same place for
      storing the session data then the script with the minimum value will be
      cleaning the data. In this case, use this directive together with <link
      linkend="ini.session.save-path">session.save_path</link>.
     </para>
    </note>
    <note>
     <simpara>If you are using the default file-based session handler, your
     filesystem must keep track of access times (atime). Windows FAT does
     not so you will have to come up with another way to handle garbage
     collecting your session if you are stuck with a FAT filesystem or any
     other filesystem where atime tracking is not available.
     Since PHP 4.2.3 it has used mtime (modified date) instead of atime. So, you
     won't have problems with filesystems where atime tracking is not available.
     </simpara>
    </note>
   </listitem>
  </varlistentry>

  <varlistentry id="ini.session.referer-check">
   <term>
    <parameter>session.referer_check</parameter>
    <type>string</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.referer_check</literal> contains the
     substring you want to check each HTTP Referer for. If the
     Referer was sent by the client and the substring was not
     found, the embedded session id will be marked as invalid.
     Defaults to the empty string.
    </simpara>
   </listitem>
  </varlistentry>

  <varlistentry id="ini.session.entropy-file">
   <term>
    <parameter>session.entropy_file</parameter>
    <type>string</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.entropy_file</literal> gives a path to an
     external resource (file) which will be used as an additional
     entropy source in the session id creation process. Examples are
     <literal>/dev/random</literal> or <literal>/dev/urandom</literal>
     which are available on many Unix systems.
    </simpara>
   </listitem>
  </varlistentry>

  <varlistentry id="ini.session.entropy-length">
   <term>
    <parameter>session.entropy_length</parameter>
    <type>integer</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.entropy_length</literal> specifies the number
     of bytes which will be read from the file specified
     above. Defaults to <literal>0</literal> (disabled).
    </simpara>
   </listitem>
  </varlistentry>

  <varlistentry id="ini.session.use-cookies">
   <term>
    <parameter>session.use_cookies</parameter>
    <type>boolean</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.use_cookies</literal> specifies whether the
     module will use cookies to store the session id on the client
     side. Defaults to <literal>1</literal> (enabled).
    </simpara>
   </listitem>
  </varlistentry>

  <varlistentry id="ini.session.use-only-cookies">
   <term>
    <parameter>session.use_only_cookies</parameter>
    <type>boolean</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.use_only_cookies</literal> specifies whether
     the module will <emphasis role="strong">only</emphasis> use
     cookies to store the session id on the client side. Defaults
     to <literal>0</literal> (disabled, for backward compatibility).
     Enabling this setting prevents attacks involved passing session
     ids in URLs. This setting was added in PHP 4.3.0.
    </simpara>
   </listitem>
  </varlistentry>


  <varlistentry id="ini.session.cookie-lifetime">
   <term>
    <parameter>session.cookie_lifetime</parameter>
    <type>integer</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.cookie_lifetime</literal> specifies the lifetime of
     the cookie in seconds which is sent to the browser. The value 0
     means "until the browser is closed." Defaults to
     <literal>0</literal>. See also
     <function>session_get_cookie_params</function> and
     <function>session_set_cookie_params</function>.
    </simpara>
   </listitem>
  </varlistentry>

  <varlistentry id="ini.session.cookie-path">
   <term>
    <parameter>session.cookie_path</parameter>
    <type>string</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.cookie_path</literal> specifies path to set
     in session_cookie. Defaults to <literal>/</literal>. See also
     <function>session_get_cookie_params</function> and
     <function>session_set_cookie_params</function>.
    </simpara>
   </listitem>
  </varlistentry>

  <varlistentry id="ini.session.cookie-domain">
   <term>
    <parameter>session.cookie_domain</parameter>
    <type>string</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.cookie_domain</literal> specifies the domain to
     set in session_cookie. Default is none at all meaning the host name of
     the server which generated the cookie according to cookies specification.
     See also <function>session_get_cookie_params</function> and
     <function>session_set_cookie_params</function>.
    </simpara>
   </listitem>
  </varlistentry>

  <varlistentry id="ini.session.cookie-secure">
   <term>
    <parameter>session.cookie_secure</parameter>
    <type>boolean</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.cookie_secure</literal> specifies whether
     cookies should only be sent over secure connections. Defaults to
     <literal>off</literal>.
     This setting was added in PHP 4.0.4. See also
     <function>session_get_cookie_params</function> and
     <function>session_set_cookie_params</function>.
    </simpara>
   </listitem>
  </varlistentry>

  <varlistentry id="ini.session.cache-limiter">
   <term>
    <parameter>session.cache_limiter</parameter>
    <type>string</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.cache_limiter</literal> specifies cache
     control method to use for session pages
     (none/nocache/private/private_no_expire/public). Defaults to
     <literal>nocache</literal>. See also
     <function>session_cache_limiter</function>.
    </simpara>
   </listitem>
  </varlistentry>


  <varlistentry id="ini.session.cache-expire">
   <term>
    <parameter>session.cache_expire</parameter>
    <type>integer</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.cache_expire</literal> specifies time-to-live
     for cached session pages in minutes, this has no effect for
     nocache limiter. Defaults to <literal>180</literal>. See also
     <function>session_cache_expire</function>.
    </simpara>
   </listitem>
  </varlistentry>

  <varlistentry id="ini.session.use-trans-sid">
   <term>
    <parameter>session.use_trans_sid</parameter>
    <type>boolean</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.use_trans_sid</literal> whether transparent
     sid support is enabled or not. Defaults to
     <literal>0</literal> (disabled).
    </simpara>
    <note>
     <simpara>
      For PHP 4.1.2 or less, it is enabled by compiling with 
      <link linkend="configure.enable-trans-sid">
      <literal>--enable-trans-sid</literal></link>.
      From PHP 4.2.0, trans-sid feature is always compiled.
     </simpara>
     <simpara>
      URL based session management has additional security risks
      compared to cookie based session management. Users may send
      a URL that contains an active session ID to their friends by
      email or users may save a URL that contains a session ID to
      their bookmarks and access your site with the same session ID
      always, for example.
     </simpara>
    </note>
   </listitem>
  </varlistentry>
  
  <varlistentry id="ini.session.bug-compat-42">
   <term>
    <parameter>session.bug_compat_42</parameter>
    <type>boolean</type>
   </term>
   <listitem>
    <simpara>
     PHP versions 4.2.3 and lower have an undocumented feature/bug that
     allows you to initialize a session variable in the global scope,
     albeit <link linkend="ini.register-globals">register_globals</link>
     is disabled.  PHP 4.3.0 and later will warn you, if this feature is
     used, and if <link linkend="ini.session.bug-compat-warn">
     session.bug_compat_warn</link> is also enabled.  This feature/bug can be
     disabled by disabling this directive.
    </simpara>
   </listitem>
  </varlistentry>
  
  <varlistentry id="ini.session.bug-compat-warn">
   <term>
    <parameter>session.bug_compat_warn</parameter>
    <type>boolean</type>
   </term>
   <listitem>
    <simpara>
     PHP versions 4.2.3 and lower have an undocumented feature/bug that
     allows you to initialize a session variable in the global scope,
     albeit <link linkend="ini.register-globals">register_globals</link>
     is disabled.  PHP 4.3.0 and later will warn you, if this feature is
     used by enabling both 
     <link linkend="ini.session.bug-compat-42">session.bug_compat_42</link>
     and <link linkend="ini.session.bug-compat-warn">
     session.bug_compat_warn</link>.
    </simpara>
   </listitem>
  </varlistentry>

  <varlistentry id="ini.session.hash-function">
   <term>
    <parameter>session.hash_function</parameter>
    <type>integer</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.hash_function</literal> allows you to specify the hash
     algorithm used to generate the session IDs. '0' means MD5 (128 bits) and
     '1' means SHA-1 (160 bits).
    </simpara>
    <note>
     <para>
      This was introduced in PHP 5.
     </para>
    </note>
   </listitem>
  </varlistentry>

  <varlistentry id="ini.session.hash-bits-per-character">
   <term>
    <parameter>session.hash_bits_per_character</parameter>
    <type>integer</type>
   </term>
   <listitem>
    <simpara>
     <literal>session.hash_bits_per_character</literal> allows you to define
     how many bits are stored in each character when converting the binary
     hash data to something readable. The possible values are '4' (0-9, a-f),
     '5' (0-9, a-v), and '6' (0-9, a-z, A-Z, "-", ",").
    </simpara>
    <note>
     <para>
      This was introduced in PHP 5.
     </para>
    </note>
   </listitem>
  </varlistentry>

  <varlistentry id="ini.url-rewriter.tags">
   <term>
    <parameter>url_rewriter.tags</parameter>
    <type>string</type>
   </term>
   <listitem>
    <simpara>
     <literal>url_rewriter.tags</literal> specifies which HTML tags
     are rewritten to include session id if transparent sid support
     is enabled. Defaults to
     <literal>a=href,area=href,frame=src,input=src,form=fakeentry,fieldset=</literal>
    </simpara>
    <note>
     <simpara>
      If you want XHTML conformity, remove the <literal>form</literal> entry and
      use the &lt;fieldset&gt; tags around your form fields.
     </simpara>
    </note>
   </listitem>
  </varlistentry>
 </variablelist>
 </para>

 <para>
  <link
  linkend="ini.track-vars"><literal>track_vars</literal></link> 和
  <link
  linkend="ini.register-globals"><literal>register_globals</literal></link>
  配置选项影响到会话变量是怎样存储和恢复的。
 </para>

 <note>
  <para>
   自 PHP 4.0.3 起，<link
   linkend="ini.track-vars"><literal>track_vars</literal></link> 总是打开的。
  </para>
 </note>

</section>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
