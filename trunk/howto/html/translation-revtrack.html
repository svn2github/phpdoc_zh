<HTML
><HEAD
><TITLE
>修订版本追踪</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
Rel="stylesheet" 
Type="text/css" 
href="howto.css"
><LINK
REL="HOME"
TITLE="PHP 文档工作指引"
HREF="index.html"><LINK
REL="UP"
TITLE="翻译者相关信息"
HREF="chapter-translation.html"><LINK
REL="PREVIOUS"
TITLE="给翻译者的一些忠告"
HREF="translation-practical.html"><LINK
REL="NEXT"
TITLE="phpdoc、php-doc-chm、php-notes 及其它邮件列表"
HREF="chapter-maillist.html"><META
HTTP-EQUIV="Content-type"
CONTENT="text/html; charset=gb2312"></HEAD
><BODY
CLASS="sect1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PHP 文档工作指引</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="translation-practical.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 9. 翻译者相关信息</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="chapter-maillist.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="translation-revtrack">9.4. 修订版本追踪</H1
><P
>&#13;    PHP 文档的翻译工作，不仅仅只是翻译英文文档的内容，然后提交翻译的结果。您需要时常更新已经翻译好的文件，使它们的内容和最新的英文版文件的内容保持一致。您需要加入 phpdoc <A
HREF="chapter-maillist.html"
>邮件列表</A
>以获取英文目录下的文件的更新信息。如果您从来不更新您的文件，则您所做的翻译工作最后可能会付之东流。同时，您还需要加入您参加的翻译工程对应语言的邮件列表，以获得提交文件时 CVS 自动生成的信息，并参与该翻译工程的讨论。
   </P
><P
>&#13;    更新一个外语语种的文件不是一件容易的工作，因为您需要知道谁在什么时候翻译了哪些文件，否则您无法知道要在文档的什么地方进行修改和更新。我们有两套系统来跟踪 <TT
CLASS="literal"
>phpdoc</TT
> 文件的修订版本和它们被更新的日期。
   </P
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="translation-revcheck-translators">9.4.1. Translator 文件</H2
><P
>&#13;     有些翻译者在它们翻译工程的根目录下建立一个 <TT
CLASS="filename"
>Translators</TT
> 文件来跟踪修订版本。该文件可以包含翻译者的姓名、电子邮件地址、 CVS 用户名以及已经翻译过的文件列表。
    </P
><P
> 
     翻译者和文件的关系、修订版本号以及文件的状态等信息可以和 XML 文件的文件名一同被保存。以下是以 xx 语言为例列举的 Translator 文件的范例：
     <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><PRE
CLASS="programlisting"
>=============================================================================
CVS User  Name                 Contact email address
=============================================================================
joedoe    Joe Doe              joe@hotmail.com
jane      Jane Smith           jsmith@yahoo.com
...

=============================================================================
Filename                    Translator      Revision
=============================================================================
bookinfo.xml                jane            1.16
language-defs.ent           jane            1.7
language-snippets.ent       joedoe          1.8
preface.xml
------- appendices ----------------------------------------------------------
aliases.xml                 joedoe          working
debugger.xml
escaping.xml
history.xml                 jane            1.2
...</PRE
></TD
></TR
></TABLE
>
     在以上范例中，您能够看到翻译者的列表，以及文件列表的前几行。在这里，您可以保存文件的指定信息，修订版本号（即该翻译文档是建立在那个英文版本之上的）等，如果原英文文档还没有版本号，那么可以加上它的当前状态，例如，working。
    </P
><P
>&#13;     当一个文件需要被更新时（例如，英文版的 bookinfo.xml 文件升级到了 1.20 版），您可以得到 1.16 版和 1.20 版之间的区别，这样您就可以找到在翻译的文件中做哪些更改。您可以通过 CVS 的 <B
CLASS="command"
>diff</B
> 命令来得到不同版本之间的区别，也可以通过 CVS 的 WEB 界面 <A
HREF="http://cvs.php.net/"
TARGET="_top"
>http://cvs.php.net/</A
> 来查看这些区别。该 WEB 界面能够生成便于阅读的区别信息，以便您能够容易的找出需要删除、增加或者修改的地方。
    </P
><P
>&#13;     如果您选择这个方法，请不要忘了在您更改过您语言目录树下的文件后要更新 <TT
CLASS="filename"
>Translators</TT
> 文件中对应的修正版本号。
    </P
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Note: </B
>
      对于目前的 <TT
CLASS="filename"
>phpdoc</TT
> 体系来说，该系统并不方便维护，因为在一个文本文件中追踪四千多个文件的修订版本号是一件很困难的事情。您可以考虑使用以下提供的修订版本注释法，使用这种方法使得您只用关注您更新的文件即可。
     </P
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="translation-revcheck-comments">9.4.2. 修订版本注释</H2
><P
>&#13;     除了以上提及的方法以外，我们还有另外一种方法来追踪修订版本号。您可以自己决定，该方法是否更适合您。有些语种的翻译工作同时使用修订版本注释和 Translator 文件两种方法，有些仅使用其中的一种。我们建议您最好能确定仅使用其中的某一种方法，否则事情可能会变得更加难以处理。
    </P
><P
>&#13;     和将所有的职责全部保存在一个核心文件比起来，修订版本注释系统将这些信息保存在各自的文件中。和以上 <A
HREF="translation-revtrack.html#translation-revcheck-translators"
>Translators</A
> 文件范例的内容类似，我们现在将所有的修订版本号和一些关联信息全部分散到各个文件中。以下是在这种情况下 <TT
CLASS="filename"
>bookinfo.xml</TT
> 文件应该包含的文件头：
     <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><PRE
CLASS="programlisting"
>&#60;!-- EN-Revision: 1.16 Maintainer: jane Status: ready --&#62;</PRE
></TD
></TR
></TABLE
>
    </P
><P
>&#13;     您可以发现在这里我们没有损失任何信息，而且，我们还可以根据需要加上一些其它的状态信息（例如，给未完成的文档标上“partial”）。该修订版本注释系统主要是将这些信息保存在 XML 文件中，而不是保存到一个核心的文件中。对于目前有着四千多个文件的英文版目录，这种方法显得相当的方便。
    </P
><P
> 
     到目前位置，以上提及的三种信息都是必须的。Maintainer 是翻译和维护者的 CVS 用户名，或者其它不包含空格的昵称；status 可以是不包含空格的任意值。请注意，该文件头并不像 <TT
CLASS="literal"
>$Revision</TT
> 那样会被 CVS 自动更新，这些内容只有在您自己更新了文件的内容时才被更改。
    </P
><P
>&#13;     您可能觉得这是一个不错的方法，但是使用这些注释，我们就无法得到一个有着全部文件信息的列表。实际上，您并没有失去这些，而且反而得到更多的信息。如果您希望生成一个类似于 <TT
CLASS="filename"
>Translators</TT
> 文件那样的列表，您可以切换到 <TT
CLASS="filename"
>scripts</TT
> 目录，然后运行：
     <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><PRE
CLASS="programlisting"
>./revcheck.php xx &#62; revcheck.html</PRE
></TD
></TR
></TABLE
>
     这里，<TT
CLASS="literal"
>xx</TT
> 是我们所要的语言代码（简体中文为“zh”）。在运行该脚本以后您将在相同目录下得到一个 <TT
CLASS="filename"
>revcheck.html</TT
> 文件。该文件中有所有文件修订版本的比较。您也可以增加一个限制的参数，如维护者名称，这样该脚本将只列出和给出维护者名称相关的文件。跟 <TT
CLASS="filename"
>Translators</TT
> 文件相比，这个 HTML 文件给您更多的信息。作为范例，您可以查看意大利语版（代码 it）翻译工程的 <TT
CLASS="filename"
>revcheck.html</TT
> 文件。您还可以简单的在 phpdoc 根目录下运行 <TT
CLASS="literal"
>make revcheck</TT
> 来得到该文件，如果您前面已经运行过 <B
CLASS="command"
>./configure --with-lang=xx</B
>。
    </P
><P
>&#13;     由于这个系统在很多翻译小组中越来越流行，因此在线自动生成系统会在生成手册过程的开始为该语言版本生成一个 <TT
CLASS="filename"
>revcheck.html.gz</TT
> 文件。它和 <TT
CLASS="filename"
>build.log.gz</TT
> 文件一样，都在手册的某个语言版本的在线发布目录下。作为范例，请参考意大利语翻译工程的在线发布： <A
HREF="http://www.php.net/it/rev"
TARGET="_top"
>http://www.php.net/it/rev</A
>。
    </P
><P
>&#13;     由于将 <TT
CLASS="filename"
>Translators</TT
> 文件中所有的内容都导入到以上生成的 HTML 文件中的需要，对于该脚本还有一些更多的解释。这也是我们要引入 <TT
CLASS="filename"
>translation.xml</TT
> 文件的原因。以下是一个简单的 xx 语言版本的 <TT
CLASS="filename"
>translation.xml</TT
> 的范例，其内容与以上 <TT
CLASS="filename"
>Translators</TT
> 文件范例的内容相同：
     <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><PRE
CLASS="programlisting"
>&#60;?xml version="1.0" encoding="iso-8859-1" ?&#62;
&#60;!DOCTYPE translation SYSTEM "../dtds/translation.dtd"&#62;

&#60;translation&#62;

 &#60;intro&#62;
  This is some introductory text for the xx language translators
  about who is the manager of the translation, and where to find
  more information. This paragraph is printed on the top of the
  generated revcheck.html page.
 &#60;/intro&#62;
 
 &#60;chmindex&#62;
  This file was generated: &#60;datetime/&#62;&#60;br/&#62;
  Go to &#60;a href="http://www.php.net/download-docs"&#62;http://www.php.net/download-docs&#60;/a&#62;
  to get the actual version.
 &#60;/chmindex&#62;

 &#60;translators&#62;
  &#60;person name="Joe Doe"     email="joe@hotmail.com"  nick="joedoe" cvs="yes" editor="yes"/&#62;
  &#60;person name="Jane Smith"  email="jsmith@yahoo.com" nick="jane"   cvs="yes"/&#62;
  &#60;person name="Joe Forever" email="joe@forever.net"  nick="joefo"  cvs="no"/&#62;
 &#60;/translators&#62;
 
 &#60;work-in-progress&#62;
  &#60;file name="appendices/aliases.xml" person="joedoe" type="working"/&#62;
  &#60;file name="functions/dbx.xml"      person="joefo"  type="working"/&#62;
 &#60;/work-in-progress&#62;

&#60;/translation&#62;</PRE
></TD
></TR
></TABLE
>
     正如您所看到的，该文件能够保存 <TT
CLASS="filename"
>Translators</TT
> 文件中所包含的所有信息。和后者相比，这个文件的新特点是您可以在该文件中添加没有 CVS 账号的翻译人员，并且可以给他们指派已经就绪的或者正在翻译中的文档。使用这个新功能的一个最大的好处，就是所有的这些信息将被用来在 <TT
CLASS="filename"
>revcheck.html</TT
> 文件中生成动态的表格。在该表格中，每个文件的条目后面都有该文件翻译者的链接，同时该文件还有一个根据翻译者列出的所有文件状态的表格。如果某个文件正在更新的过程中，那么您需要在该文件以已就绪文件的方式指派给其翻译者。
    </P
><P
>&#13;     在 XML 文件中有两个和 CHM 格式相关的问题需要注意。第一个是 &#60;chmindex&#62; 部分，在该部分您可以加上您希望显示在 CHM 版本首页上的文字，并给这些文字加上指向相关信息的链接。&#60;person&#62; 标记的“editor”属性中的内容将被用在 CHM 版本首页上的翻译小组列表中。这个属性不是必需的，但是对于任何使用 CHM 格式的读者所阅读的手册译文来说，该属性是至关重要的。请注意目前这些还没有被用在 CHM 版手册的生成过程中，但对于目前正处于紧张的测试和开发阶段中的“下一代” CHM 版本来说是很重要的信息。
    </P
><P
>&#13;     当您添加一个 &#60;file&#62; 标签的时候，您可以根据需要加上两个可选的参数： <TT
CLASS="literal"
>date</TT
> 和 <TT
CLASS="literal"
>revision</TT
>。“date”是开始翻译该文件的日期，“revision”是开始翻译该文件所基于的英文版文件的修订版本（该版本号在统计表中表示为“CO-Revision”）。目前对于 <TT
CLASS="literal"
>date</TT
> 参数尚无统一的规定。
    </P
><P
>&#13;     该系统的另一个新特性，是提供了列出为一个文件的翻译做出贡献的所有翻译者的名单的方法，而不仅仅只记录当前的维护者。为了达到这个目的，我们增加了一个“credit”注释。假如 Joe Doe 先完成了 <TT
CLASS="filename"
>history.xml</TT
> 的翻译工作，然后 Jane 在他后面又做了很多维护工作，那么该文件的“credit”注释可以写成如下形式：
     <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><PRE
CLASS="programlisting"
>&#60;!-- CREDITS: joedoe --&#62;</PRE
></TD
></TR
></TABLE
>
     在“creidt”注释中，如果有多个名称，可以用逗号隔开。该注释仅影响 <TT
CLASS="filename"
>revcheck.html.gz</TT
> 文件翻译者列表中的内容。
    </P
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="translation-revcheck-status">9.4.3. 在线状态检测脚本程序</H2
><P
>&#13;     Rasmus Lerdorf 开发了在线状态检测脚本程序。当有很多文档缺少修订版本注释的时候，该脚本程序显得特别有用。当然如果您和您的团队使用了修订版本注释来跟踪修订版本时，您可以使用<A
HREF="translation-revtrack.html#translation-revcheck-comments"
>上文</A
>提到的方法。
    </P
><P
>&#13;     您可以访问 <A
HREF="http://toye.php.net/~rasmus/status.php"
TARGET="_top"
>http://toye.php.net/~rasmus/status.php</A
> 来使用该脚本程序。在访问该页面时，该脚本程序需要统计所有翻译版本下所有文件的日期信息，因此您可能需要花一些时间等待页面的生成。如果您希望将该页面的内容限制到某一个特定的语言版本，您可以加上一个形如 <TT
CLASS="literal"
>?l=LANGCODE</TT
> 的 URL 参数。例如，希望浏览简体中文版的报告，则访问：<A
HREF="http://toye.php.net/~rasmus/status.php?l=zh"
TARGET="_top"
>http://toye.php.net/~rasmus/status.php?l=zh</A
>。
    </P
><P
>&#13;     该脚本程序试图根据最后一次更改的日期来确定一个文件是否应该被更新。如果您修正了您本语言翻译版本的文件，或者修正过一些字面的错误，则该脚本程序显示的结果将不正确，因为程序认为您所做的修改是为了使该文档的内容和英文版文件的新版本的内容保持同步，因此会将该文件标记为已更新。尽管利用该脚本程序可以帮助您不用<A
HREF="translation-revtrack.html#translation-revcheck-comments"
>修订版本注释</A
>即可追踪一些文件，但是如果您使用版本追踪注释，您就能得到比该脚本程序所提供的更多更准确的结果。
    </P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="translation-practical.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="chapter-maillist.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>给翻译者的一些忠告</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="chapter-translation.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>phpdoc、php-doc-chm、php-notes 及其它邮件列表</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>