<HTML
><HEAD
><TITLE
>Revision Tracking</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="PHP 文档指引"
HREF="index.html"><LINK
REL="UP"
TITLE="Information for Translators"
HREF="chapter-translation.html"><LINK
REL="PREVIOUS"
TITLE="Practical Advice for Translators"
HREF="translation-practical.html"><LINK
REL="NEXT"
TITLE="The phpdoc, php-doc-chm and php-notes Mailing Lists"
HREF="chapter-maillist.html"><META
HTTP-EQUIV="Content-type"
CONTENT="text/html; charset=gb2312"></HEAD
><BODY
CLASS="sect1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PHP 文档指引</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="translation-practical.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 9. Information for Translators</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="chapter-maillist.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="translation-revtrack">9.4. Revision Tracking</H1
><P
>&#13;    Working on the translations is not just translating
    an English file and commiting the results. Much of
    the work is needed to update the already translated
    ones, to get in sync with the content of the English
    files. To follow the modifications in the English
    tree, you should subscribe to the
    <A
HREF="chapter-maillist.html"
>mailing list</A
>,
    or read the archives. If you never update your files,
    the translations can get useless.
   </P
><P
>&#13;    Updating a foreign language file can get difficult,
    as you may not know when and who translated that file,
    so you may not know where you should look for the
    updates needed. We have two (plus one) system for tracking
    the revisions and modification dates of the files in
    <TT
CLASS="literal"
>phpdoc</TT
>.
   </P
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="translation-revcheck-translators">9.4.1. The Translators Files</H2
><P
>&#13;     Nearly all translations are currently using a
     <TT
CLASS="filename"
>Translators</TT
> file just in the
     root of their translation's tree. This file
     can contain the names, email addresses, and CVS
     user names of the contributors of this translation,
     and the list of files translated.
    </P
><P
>&#13;     Along with the XML file names, associations between
     translators and files, revision numbers, and status
     information can also be stored. One sample Translators
     file, for the imaginary xx language can look like this:
     <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><PRE
CLASS="programlisting"
>=============================================================================
CVS User  Name                 Contact email address
=============================================================================
joedoe    Joe Doe              joe@hotmail.com
jane      Jane Smith           jsmith@yahoo.com
...

=============================================================================
Filename                    Translator      Revision
=============================================================================
bookinfo.xml                jane            1.16
language-defs.ent           jane            1.7
language-snippets.ent       joedoe          1.8
preface.xml
------- appendices ----------------------------------------------------------
aliases.xml                 joedoe          working
debugger.xml
escaping.xml
history.xml                 jane            1.2
...</PRE
></TD
></TR
></TABLE
>
     In this example you can see the listing of translators, and
     the first few lines of the list of files. Here you can store
     the assignment of the file, the revision number (what English
     file this translation was based on), and if there is no revision
     number yet, a status (eg. working).
    </P
><P
>&#13;     When it is time to update a file (eg. bookinfo.xml jumped to
     1.20 as time passed), you can ask for a diff between 1.16 and
     1.20, and you'll see what modifications you need to port to
     the translated file. You can ask for diffs by using the diff
     CVS command, or using the web interface at <A
HREF="http://cvs.php.net/"
TARGET="_top"
>&#13;     http://cvs.php.net/</A
>. The web interface can generate really
     visual diffs, so you can easily spot what needs to be deleted,
     added and modified where.
    </P
><P
>&#13;     If you choose this method, do not forget to update the revision
     numbers stored in the <TT
CLASS="filename"
>Translators</TT
> as
     you update files in your language's tree.
    </P
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="translation-revcheck-comments">9.4.2. The Revision Comments</H2
><P
>&#13;     There is another way of tracking versions instead of
     using the method descibed above. You can decide yourself,
     as this is the better method for you or not. Some
     languages use the Revision comments and Translators files
     paralelly, some use only one of these. It is better to
     decide, and not to use two systems, as things can get
     messy this way.
    </P
><P
>&#13;     Instead of storing all responsibilities in a central file,
     the revision comment system stores them in the files they
     provide information about. Consider the <A
HREF="translation-revtrack.html#translation-revcheck-translators"
>Translators</A
>
     example above. Now we spread the revision and association
     informations in the files mentioned there. Let's see what
     would be in the header of the <TT
CLASS="filename"
>bookinfo.xml</TT
>
     file in this case:
     <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><PRE
CLASS="programlisting"
>&#60;!-- EN-Revision: 1.16 Maintainer: jane Status: ready --&#62;</PRE
></TD
></TR
></TABLE
>
    </P
><P
>&#13;     You can see we loose no information here, but we can also
     add some other status information in the case it is needed
     (eg. "partial" for incomplete translations). This revision
     comment system is basically about storing the information in
     the XML files, and not in a central place.
    </P
><P
>&#13;     Currently all the three information is needed. Maintainer
     is intended to be a CVS user name, or some nickname without
     a space, status can be anything without a space. Note, that
     this header is not updated by CVS (as
     <TT
CLASS="literal"
>$Revision</TT
> is updated automatically). This
     is only updated when you edit the contents of the comment.
    </P
><P
>&#13;     You may see this as a good thing, but using these comments,
     you loose the quick look on the whole list of your
     files. No, you do not loose this, but get much more! If
     you would like to build a list similar to the
     <TT
CLASS="filename"
>Translators</TT
> file given above, you
     can go to the scripts directory and run:
     <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><PRE
CLASS="programlisting"
>./revcheck.php xx &#62; revcheck.html</PRE
></TD
></TR
></TABLE
>
     Here <TT
CLASS="literal"
>xx</TT
> is the imaginary language code.
     After running this script you'll get a
     <TT
CLASS="filename"
>revcheck.html</TT
> in the same directory.
     You can find revision comparisions and links to diffs
     for all the files in this language. You can also
     add a furter restriction parameter, the maintainer name,
     so the script will only list the files corresponding to
     the given maintaner. This HTML file gives you much more
     than the <TT
CLASS="filename"
>Translators</TT
> file. See it
     yourself for example with the Italian translation (code:
     it). You can also easily run this with <TT
CLASS="literal"
>make
     revcheck</TT
> in the phpdoc root directory, in 
     case you issued a 
     <TT
CLASS="literal"
>./configure --with-lang=xx</TT
> before.
    </P
><P
>&#13;     As this system gets popular in many translation groups,
     the automatic build process also generates a
     <TT
CLASS="filename"
>revcheck.html</TT
> at the end of the
     build process for that language. It is available online
     in the languages manual directory, as
     <TT
CLASS="filename"
>build.log.gz</TT
> is also there.
     See the Italian translation's file online:
     <A
HREF="http://www.php.net/manual/it/revcheck.html.gz"
TARGET="_top"
>http://www.php.net/manual/it/revcheck.html.gz</A
>.
    </P
><P
>&#13;     There are some extensions introduced for this script,
     as need arised to port all contents of the
     <TT
CLASS="filename"
>Translators</TT
> files to be available
     in this generated HTML page. This is why the
     <TT
CLASS="filename"
>translation.xml</TT
> files are
     introduced. Here comes a simple
     <TT
CLASS="filename"
>translation.xml</TT
> file
     for the imaginary xx language (contents ported from
     the <TT
CLASS="filename"
>Translators</TT
> example above):
     <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><PRE
CLASS="programlisting"
>&#60;?xml version="1.0" encoding="iso-8859-1" ?&#62;
&#60;!DOCTYPE translation SYSTEM "../dtds/translation.dtd"&#62;

&#60;translation&#62;

 &#60;intro&#62;
  This is some introductory text for the xx language translators
  about who is the manager of the translation, and where to find
  more information. This paragraph is printed on the top of the
  generated revcheck.html page.
 &#60;/intro&#62;
 
 &#60;chmindex&#62;
  This file was generated: &#60;datetime/&#62;&#60;br/&#62;
  Go to &#60;a href="http://www.php.net/download-docs"&#62;http://www.php.net/download-docs&#60;/a&#62;
  to get the actual version.
 &#60;/chmindex&#62;

 &#60;translators&#62;
  &#60;person name="Joe Doe"     email="joe@hotmail.com"  nick="joedoe" cvs="yes" editor="yes"/&#62;
  &#60;person name="Jane Smith"  email="jsmith@yahoo.com" nick="jane"   cvs="yes"/&#62;
  &#60;person name="Joe Forever" email="joe@forever.net"  nick="joefo"  cvs="no"/&#62;
 &#60;/translators&#62;
 
 &#60;work-in-progress&#62;
  &#60;file name="appendices/aliases.xml" person="joedoe" type="working"/&#62;
  &#60;file name="functions/dbx.xml"      person="joefo"  type="working"/&#62;
 &#60;/work-in-progress&#62;

&#60;/translation&#62;</PRE
></TD
></TR
></TABLE
>
     As you can see, this file can store exactly the same content,
     as a <TT
CLASS="filename"
>Translators</TT
> file. What is new in this
     file, is that you can add users without a CVS account, and can
     assign ready documents or work-in-progress files to them. The
     biggest advantage of using this addon is that all this information
     is used to generate dynamic tables of translators and files in
     the <TT
CLASS="filename"
>revcheck.html</TT
> file. All translators
     are linked to from the individual files they are assigned
     to, and there is a nice table showing the state of files for
     all the translators.
    </P
><P
>&#13;     There are two CHM format related things in this XML file. The
     first is the &#60;chmindex&#62; part, where you can specify your
     text to display on the CHM index page, with a link to the actual
     versions. The editor parameter of a &#60;person&#62; is also used
     in the grouping of translators on the CHM index page. These
     are optional, but are vital for every translation where the
     readers use the CHM format (all translations ;).
    </P
><P
>&#13;     There are two optional parameters you can add to a &#60;file&#62;,
     if you would like to record it: the <TT
CLASS="literal"
>date</TT
>
     and <TT
CLASS="literal"
>revision</TT
>. Date is assumed to be the date
     when the work was started, revision is the checked out revision
     of the English file used to start the work (denoted as
     CO-Revision in the generated table).
    </P
><P
>&#13;     Another addon to this system is just to give credit to all people
     worked on one file, and not just the current maintainer. To achive
     this goal, we added the credit comments. One credit comment in
     eg. <TT
CLASS="filename"
>history.xml</TT
> may look like this (in case
     Joe Doe translated the file initally, but Jane followed him to
     be the maintainer):
     <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
CELLPADDING="5"
><TR
><TD
><PRE
CLASS="programlisting"
>&#60;!-- CREDITS: joedoe --&#62;</PRE
></TD
></TR
></TABLE
>
     The credits comment can contain a comma separated list. These
     comments only affect the display of the translators table in
     <TT
CLASS="filename"
>revcheck.html</TT
>.
    </P
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="translation-revcheck-status">9.4.3. The Online Status Script</H2
><P
>&#13;     Rasmus Lerdorf developed on online status checking script.
     This script is most useful for files without revision comments,
     so if you use the Revision comments, use the specific script
     <A
HREF="translation-revtrack.html#translation-revcheck-comments"
>mentioned above</A
>.
    </P
><P
>&#13;     You can access the script at: <A
HREF="http://toye.php.net/~rasmus/status.php"
TARGET="_top"
>http://toye.php.net/~rasmus/status.php</A
>.
     Visiting this page, you need to wait for some time to generate,
     as it builds a whole table of file and dates information about
     all translations. If you would like to restrict the table to only
     one translation, you can provide the <TT
CLASS="literal"
>?l=langcode</TT
>
     URL parameter, so to view the Hungarian status, visit:
     <A
HREF="http://toye.php.net/~rasmus/status.php?l=hu"
TARGET="_top"
>http://toye.php.net/~rasmus/status.php?l=hu</A
>.
    </P
><P
>&#13;     This script tries to decide whether a file is up to date or not
     from the last modification date. The results are not correct if
     you modify your languages file, fixing typos, as this script thinks
     you modified the file to get in sync with the English one, and will
     mark your file as up to date. Although this script can help some
     to track files without <A
HREF="translation-revtrack.html#translation-revcheck-comments"
>revision
     comments</A
>, if you use revision comments, you can get more
     accurate results than this script, and much more than that.
    </P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="translation-practical.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="chapter-maillist.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Practical Advice for Translators</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="chapter-translation.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>The phpdoc, php-doc-chm and php-notes Mailing Lists</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>